# SPDX-License-Identifier: Apache-2.0
# SPDX-FileCopyrightText: 2026 SubLang International <https://sublang.ai>

# System-wide tmux defaults.
# User overrides go in ~/.tmux.conf (loaded after this file).

set -g history-limit 10000
# screen-256color instead of tmux-256color: some agent CLIs
# (observed in Claude Code, Codex CLI) render > and single-quote
# chars as underscores under tmux-256color. screen-256color is the
# tmux FAQ recommendation for maximum compatibility.
set -g default-terminal "screen-256color"
set -g mouse off
set -g set-clipboard on
set -g allow-passthrough on
bind-key -T copy-mode MouseDragEnd1Pane send-keys -X copy-selection-and-cancel
bind-key -T copy-mode-vi MouseDragEnd1Pane send-keys -X copy-selection-and-cancel

# Restore saved preferences across restarts (~/ is on boss-data volume).
if-shell 'grep -q "^mouse=on$" ~/.boss-prefs 2>/dev/null' 'set -g mouse on'

# Toggle mouse with prefix + m; persist the choice to ~/.boss-prefs.
bind-key m if-shell -F '#{?mouse,1,0}' \
  'set -g mouse off; display-message "Mouse off"; run-shell "grep -v ^mouse= ~/.boss-prefs 2>/dev/null > ~/.boss-prefs.tmp; echo mouse=off >> ~/.boss-prefs.tmp; mv ~/.boss-prefs.tmp ~/.boss-prefs"' \
  'set -g mouse on; display-message "Mouse on"; run-shell "grep -v ^mouse= ~/.boss-prefs 2>/dev/null > ~/.boss-prefs.tmp; echo mouse=on >> ~/.boss-prefs.tmp; mv ~/.boss-prefs.tmp ~/.boss-prefs"'
set -g status-left "[#{session_name}] "
set -g status-right "%H:%M %Y-%m-%d"
